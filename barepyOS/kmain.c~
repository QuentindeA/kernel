void
dummy()
{
    return;
}

int
div(int dividend, int divisor)
{
    int result = 0;
    int remainder = dividend;
    while (remainder >= divisor) {
        result++;
        remainder -= divisor;
    }

    return result;
}

int
compute_volume(int rad)
{
    int rad3 = rad * rad * rad;

    return div(4*355*rad3, 3*113);
}

int
kmain(void)
{
    __asm("cps #16");
    __asm("cps #19");
    int radius = 5;
    int volume;
    
    __asm("mov r2, %0" : : "r" (radius) : "r2", "r3");
    __asm("mov %0, r3" : "=r" (radius) : : "r2", "r3");

    __asm("bl 0x91c8");
    volume = compute_volume(radius);

    return volume;
}
